{"jsonrpc":"2.0","id":1,"method":"tokenize","params":{"source":"Ly8KLy8gQSBiYXNpYyBjbGFzcyBmb3IgdGVzdGluZyBwYXJzaW5nIGFzZGYKLy8KLy8gYWxvbmcgd2l0aCBhIGJ1bmNoIG9mIG90aGVyIGd1bmsKLy8KcGFja2FnZSBsaWJyYXJ5OwovPiBAVXNlQ3BwVGhlbWUKLy8gSW1wb3J0aW5nIHRoZSB0b3AgdHlwZSBmcm9tIGFub3RoZXIgZmlsZS4gVG9wIHR5cGVzIGFyZSBhbHdheXMgY29uc3RhbnQKLy8gcmVmZXJlbmNlcyBhbmQgY2FuIG5vdCBiZSBuZXctZWQgZXZlbiB0aG91Z2ggdGhleSBsaXZlIG9uIHRoZSBoZWFwLiAodGhleSBhcmUKLy8gc2luZ2xldG9ucykuCgp1c2luZyBsaWJyYXJ5IERhdGEgYXMgIkRhdGEudHR4IjsKdXNpbmcgZW50aXR5IEVtcHR5IGFzICJFbXB0eS50eHgiOwoKLy8gQ29uc3RhbnQgb2JqZWN0IC0gTXVzdCBiZSBhIFN0YWNrIHR5cGUgYW5kIGZvbGRhYmxlLiBHZW5lcmFsbHkgYWxsIGtleXdvcmRzCi8vIGFuZCB0eXBlcyBhcmUgdGhpcy4gWW91IGdlbmVyYWxseSBzaG91bGQgaGF2ZSB5b3VyIHR5cGVzIGJlIGNvbnN0YW50LgpbPS89XSBtYWdpY19udW1iZXIgOiBJbnQgPSAxMDsKCi8vIER5bmFtaWMgb2JqZWN0IC0gTWF5IGJlIGFueSB0eXBlLCBleHBvcnRlZCBhbmQgc2VyaWFsaXplZC4KWz0+Pl0gZ2xvYmFsX3ZhbHVlIDogSW50ID0gMjQ7CgovLyBIaWRkZW4gb2JqZWN0IC0gTWF5IGJlIGFueSB0eXBlLCBub3QgZXhwb3J0ZWQgYnV0IGlzIHNlcmlhbGl6ZWQuCls9IT1dIHN0YXRpY192YWx1ZSA6IEludCA9IDkyOwoKLy8gVGVtcG9yYXJ5IG9iamVjdCAtIE1heSBiZSBhbnkgdHlwZSwgbm90IGV4cG9ydGVkIGFuZCBub3Qgc2VyaWFsaXplZC4gQ2FuIGJlCi8vIHVzZWQgYXMgcHJpdmF0ZSB2YXJpYWJsZXMgb3Igd29ya2luZyBvYmplY3RzLgpbKioqXSB0ZW1wX3ZhbHVlIDogSW50ID0gOTI7CgovLyBBbGwgdHlwZXMgYXJlIGNvbnN0cnVjdGFibGUsIGJ1dCBhcmUgZWl0aGVyIGEgU3RhY2sgb3IgSGVhcCB0eXBlLiBTdGFjayB0eXBlcwovLyB1c2UgYGluaXRgIHdoaWxlIEhlYXAgdHlwZXMgdXNlIGBuZXdgLgpbKioqXSB0ZW1wX2RlZmF1bHQgOiBJbnQgPSBJbnQgLT4gbmV3KCk7CgovLyByZXR1cm5zIDAgVHlwZSBhbGlhc2VzIGFyZSBlYXN5IGVub3VnaCB0byBtYWtlLiBKdXN0IG1ha2Ugc3VyZSB0aGV5IGFyZSBjb25zdC4KWz0vPV0gVmVjMkQgOiBhbGlhcyA9IFZlY1tOdW0sIDJdOwoKLy8gWW91IGNhbiBhbHNvIHJlZXhwb3J0IGlmIG5lY2Nlc3NhcnkuIFNpbmNlIGl0J3MgY29uc3QgaXQgd2lsbCBnZXQgZGVkdXBwZWQKLy8gZHVyaW5nIGNvbXBsaWF0aW9uLgpbPS89XSBNeVR5cGUgOiBhbGlhcyA9IEVtcHR5LlRlc3RUeXBlOwoKLy8gYGluaXQgY2xhc3NgIC0+IENyZWF0ZXMgYSBuZXcgU3RhY2sgVHlwZSBTdGFjayB0eXBlcyBhcmUgY29waWVkIGJ5IHZhbHVlIGJ1dAovLyB0aGV5IGFyZW4ndCBkeW5hbWljYWxseSBhbGxvY2F0ZWQuIFN0YWNrIHR5cGVzIGNhbiBvbmx5IGluY2x1ZGUgb3RoZXIgc3RhY2sKLy8gdHlwZXMuIFN0YWNrIHR5cGVzIGFzc2lnbiBieSBtZW1jcHkgd2hpY2ggbWFrZXMgdGhlbSBzdXBlciBzcGVlZHkKWz0vPV0gU2l6ZSA6IHN0cnVjdCB7CiAgWz0+Pl0gd2lkdGggOiBJbnQgPSAwOwogIFs9Pj5dIGhlaWdodCA6IEludCA9IDA7CgogIC8vIFRoaXMgd29uJ3Qgd29yayBhcyBpdCByZXF1aXJlcyBhIEhlYXAgdHlwZS4gWz0+Pl0gaW5mbzpUZXh0ID0gVGV4dCAtPiBuZXcoKTsKICAvLyBUZW1wb3JhcnkgZnVuY3Rpb25zIGFjdCBtb3JlIG9yIGxlc3MgYXMgc3RhdGljIGZ1bmN0aW9ucyBhcyB0aGUgZnVuY3Rpb24KICAvLyBleGlzdHMgb24gdGhlIHR5cGUuCiAgWz0+Pl0gY3JlYXRlIDogZnVuYyh3aWR0aCA6IEludCwgaGVpZ2h0IDogSW50KSByZXR1cm4gLT4gU2l6ZSA9IHsKICAgIC8vIEluIGNvbnN0YW50IGZ1bmN0aW9ucyB0aGUgdGhpcyByZWZlcnMKICAgIGRlYnVnKCk7CgogICAgLy8gUHJpbnRzICJTaXplOmNsYXNzIgogICAgc2VsZi53aWR0aCA9IHdpZHRoOwogICAgc2VsZi5oZWlnaHQgPSBoZWlnaHQ7CiAgfQoKICBbPT4+XSBjcmVhdGUgOiBmdW5jKHdpZHRoIDogSW50LCBoZWlnaHQgOiBJbnQpIHJldHVybiAtPiBTaXplIHsKICAgIC8vIEluIGNvbnN0YW50IGZ1bmN0aW9ucyB0aGUgdGhpcyByZWZlcnMKICAgIGRlYnVnKCk7CgogICAgLy8gUHJpbnRzICJTaXplOmNsYXNzIgogICAgc2VsZi53aWR0aCA9IHdpZHRoOwogICAgc2VsZi5oZWlnaHQgPSBoZWlnaHQ7CiAgfQp9CgovLyBgbmV3IGNsYXNzYCAtPiBDcmVhdGVzIGEgbmV3IEhlYXAgVHlwZSBIZWFwIHR5cGVzIGFyZSBhbHdheXMgcGFzc2VkIGJ5ICJ2YWxpZAovLyBwb2ludGVycyIgWW91IGNhbiBub3QgaGF2ZSBhIG51bGwgaGVhcCB0eXBlLiBTdGFjayB0eXBlcyBhc3NpZ24gYnkgbWVtY3B5IHdoaWNoCi8vIG1ha2VzIHRoZW0gc3VwZXIgc3BlZWR5Cls9Pj5dIFJlY3QgOiBvYmplY3QgewogIC8vIENvbnN0YW50IG9iamVjdCAtIE11c3QgYmUgYSBTdGFjayB0eXBlIGFuZCBmb2xkYWJsZS4gQ29uc3QgdmFsdWVzIGRvIG5vdCBhZGQKICAvLyBzdG9yYWdlIHRvIHRoZSBvYmplY3QuCiAgWz0vPV0gY29uc3RfdmFsdWUgOiBJbnQgPSAxMDsKCiAgLy8gRHluYW1pYyBvYmplY3QgLSBBY2Nlc3NhYmxlIG91dHNpZGUgb2YgdHlwZSwgc2VyaWFsaXplZC4gVHlwaWNhbCBHb2RvdCBsaWtlCiAgLy8gdmFyaWFibGUuCiAgWz0+Pl0gcHVibGljX3ZhcmlhYmxlIDogSW50ID0gMjQ7CgogIC8vIEhpZGRlbiBvYmplY3QgLSBOb3QgYWNjZXNzYWJsZSBvdXRzaWRlIG9mIHR5cGUsIHNlcmlhbGl6ZWQuIFByaXZhdGUgdmFyaWFibGUKICAvLyB0eXBpY2FsbHkgZm9yIGNsZWFuaW5nIHVwIEFQSS4KICBbPSE9XSBwcml2YXRlX3ZhcmlhYmxlIDogSW50ID0gOTI7CgogIC8vIEhpZGRlbiBvYmplY3QgLSBOb3QgYWNjZXNzYWJsZSBvdXRzaWRlIG9mIHR5cGUsIG5vdCBzZXJpYWxpemVkLiBWYXJpYWJsZXMKICBbKioqXSB0ZW1wX3ZhbHVlIDogSW50ID0gOTI7CgogIC8vIFRldHJvZG90b3hpbiBhdm9pZHMgY29uc3RydWN0b3JzIGFuZCB0aGUgb3JkZXJpbmcgZnJvbSB0aGVtLiBJbnN0ZWFkIGFsbAogIC8vIHZhcmlhYmxlcyBhbmQgZnVuY3Rpb25zIGFyZSBpbml0YWxpemVkIHRvIGEgYmFzZSBzdGF0ZSB3aGVuIGFsbG9jYXRlZC4gKE9yZGVyCiAgLy8gaXMgbm90IGd1cmVudGVlZCkKICBbKioqXSBzaXplIDogU2l6ZSA9IFNpemUgLT4gbmV3KCk7CiAgWz0hPV0gY29sb3JzIDogRGljdFtTdHIsIFN0cl0gPSBEaWN0W1N0ciwgU3RyXSAtPiBuZXcoKTsKICBbPSE9XSBjb25zdGFudCA6IERpY3RbU3RyLCBTdHJdID0gRGljdFtTdHIsIFN0cl0gLT4gbmV3KCk7CgogIC8vIFs9Lz1dIEFsbCBmdW5jdGlvbnMgYXJlIHN0b3JlZCBpbiB2YXJpYWJsZXMuIEJsb2NrcyBhcmUgZ2VuZXJhdGVkIGFzIGxhbWJkYXMKICAvLyB3aGljaCBhcmUgbGlua2VkIGF0IHRoZSBMTFZNIGxldmVsLiBDb25zdGFudCBmdW5jdGlvbnMgYXJlIHBvd2VyZnVsIGFzIHRoZWlyCiAgLy8gImFkZHJlc3MiIGlzIGNvbnN0YW50IGVuYWJsaW5nIGEgbnVtYmVyIG9mIG9wdGltaXphdGlvbnMuIENvbnN0YW50IGZ1bmN0aW9ucwogIC8vIGFkZCBubyBzaXplIHRvIGluc3RhbnRpYXRpb25zIG9mIHRoZSB0eXBlLgogIFs9Lz1dIGFyZWEgOiBmdW5jID0oKSAtPiBJbnQgewogICAgcmV0dXJuIHNlbGYuc2l6ZS54ICogc2VsZi5zaXplLnk7CiAgfQoKICAvLyBbPT4+XSBKdXN0IGxpa2UgcmVndWxhciBkeW5hbWljIGF0dHJpYnV0ZXMgdGhlc2UgZnVuY3Rpb25zIGNhbiBiZSBjaGFuZ2VkIGF0CiAgLy8gcnVudGltZSwgYXMgbG9uZyBhcyBpdCBhbHdheXMgcG9pbnRzIHRvIGEgdmFsaWQgbG9jYXRpb24uIEV2ZW4gaWYgeW91IHBsYW4gdG8KICAvLyBhbHdheXMgY2hhbmdlIHRoZSBmdW5jdGlvbiwgeW91IG11c3QgcG9pbnQgaXQgdG8gYSB2YWxpZCBmdW5jdGlvbiB0byBzdGFydC4KICBbPT4+XSBncm93IDogZnVuYyA9KHNpemUgOiBTaXplKSAtPiBSZWN0ID0gewogICAgc2VsZi5zaXplLndpZHRoICs9IHNpemUud2lkdGg7CiAgICBzZWxmLnNpemUuaGVpZ2h0ICs9IHNpemUuaGVpZ2h0OwoKICAgIC8vIFJldHVybiB0aGlzIG9iamVjdCBvbiB0aGUgc3RhY2suCiAgICByZXR1cm4gc2VsZjsKICB9CgogIC8vIFs9IT1dIEhpZGRlbiBmdW5jdGlvbnMgY2FuIGJlIHVzZWQgYXMgcHJpdmF0ZSBvYmplY3RzLiBZb3UgY2FuIGFsc28gZnVsbHkKICAvLyBxdWFsaWZ5IHRoZSBmdW5jLCBidXQgaXQncyB1bm5lY2Nlc3NhcnkgTm90ZSB0aGF0IGFsbCBmdW5jdGlvbnMgbXVzdCBoYXZlIGEKICAvLyByZXR1cm4gdHlwZS4KICAvLwogIC8vIElmIHlvdSBmdWxseSBxdWFsaXR5IHRoZSBmdW5jdGlvbiBjYWxsLCBpdCdzCiAgWz0hPV0gZ3JvdyA6IGZ1bmNbUmVjdCwgU2l6ZSwgUmVjdF0gPShzZWxmIDogUmVjdCwgc2l6ZSA6IFNpemUpIC0+IFJlY3QgewogICAgc2VsZi5zaXplLndpZHRoICs9IHNpemUud2lkdGg7CiAgICBzZWxmLnNpemUuaGVpZ2h0ICs9IHNpemUuaGVpZ2h0OwoKICAgIC8vIFJldHVybiB0aGlzIG9iamVjdCBvbiB0aGUgc3RhY2suCiAgICByZXR1cm4gc2VsZjsKICB9CgogIC8vIFRlbXBvcmFyeSBmdW5jdGlvbnMgYWN0IG1vcmUgb3IgbGVzcyBhcyBzdGF0aWMgZnVuY3Rpb25zIGFzIHRoZSBmdW5jdGlvbgogIC8vIGV4aXN0cyBvbiB0aGUgdHlwZXMuCiAgWyoqKl0gY3JlYXRlX3NpemUgOiBmdW5jID0oc2VsZiA6IGNsYXNzKSAtPiBTaXplIHsKICAgIC8vIEluIGNvbnN0YW50IGZ1bmN0aW9ucyB0aGUgdGhpcyByZWZlcnMKICAgIGRlYnVnKHNlbGYpOwoKICAgIC8vIFByaW50cyAiU2l6ZTpjbGFzcyIKICAgIHNlbGYud2lkdGggPSB3aWR0aDsKICAgIHNlbGYuaGVpZ2h0ID0gaGVpZ2h0OwogIH0KfQoKLy8gVGhlIHR5cGVzIHRlY2huaWNhbGx5IGxpdmUgaW4gdGhlIHNpbmdsZXRvbiBvYmplY3QsIHNvIGEgZnVsbHkgcXVhbGlmaWVkIHR5cGUKLy8gbGluZSB3b3VsZCBiZSB0aGUgZm9sbG93aW5nOgpbPS89XSBncm93X3JlY3QgOiBmdW5jID0oc3JjIDogUmVjdGFuZ2xlLlJlY3QsIHNpemUgOiBSZWN0YW5nbGUuU2l6ZSkgPSBSZWN0YW5nbGUuUmVjdCB7CiAgLy8gVHlwZXMgY2FuIGJlIHVzZWQsIGJ1dCBzaW5jZSB0aGlzIGlzIGF0dGFjaGVkIHRvIGEgc2luZ2xldG9uIGl0J3MgZmluZSB0bwogIC8vIGp1c3QgdXNlIGl0IGhvdyB5b3Ugd2FudC4KICBzZWxmIC0+IGxvZyhzZWxmLm1hZ2ljX251bWJlcik7CiAgWz0+Pl0gcmVzIDogUmVjdCA9IHNyYzsKICByZXR1cm4gcmVzIC0+IGdyb3coc2l6ZSk7Cn0KCls9Pj5dIGxvZyA6IGZ1bmMoc3JjIDogQW55KSAtPiBSZWN0IHsKICAvLyBGdW5jdGlvbnMgY2FuIHRlY2huaWNhbGx5IGV4cG9ydCB2YXJpYWJsZXMsIGJ1dCBnZW5lcmFsbHkgeW91J2xsIHdhbnQgaXQgdG8KICAvLyBsaXZlIG9uIGFuIGVhc2llciB0byB0cmFjayBzaW5nbGV0b24gdGhhbiB0aGUgbGFtYmRhLgogIFs9Pj5dIHRhZyA6IFZlY1tCeXQsIDEwXSA9ICJbTG9nXSAiOwogIGRlYnVnKHRhZyArIHNyYyk7Cn0KCi8vIFRlbXBvcmFyeSBmdW5jdGlvbnMgYXJlIHNwZWNpYWwgYW5kIGNhbiBvbmx5IGJlIGNhbGxlZCBmcm9tIGEgbG9jYWwgYG9uX2xvYWRgCi8vIGZ1bmN0aW9uLiBUaGV5IGFyZSBvbmx5IGludm9jYWJsZSBieSB0aGUgVFRYIGxvYWRlci4KWyoqKl0gb25fbG9hZCA6IGZ1bmMoKSAtPiBCeXQgewogIFsqKipdIHJlY3QgOiBSZWN0ID0gUmVjdCAtPiBuZXcoKTsKICBbKioqXSBpIDogSW50ID0gMDsKICBmb3IgKGkgPSAwOyAgaSA8IDU7ICBpICs9IDEpIHsKICAgIGRlYnVnKCJWYWx1ZSBpcyAiICsgaSk7CiAgfQoKICBSZWN0YW5nbGUubG9nLnRhZyA9ICJbTmV3XSAiOwogIFJlY3RhbmdsZSAtPiBncm93X3JlY3QocmVjdCwgbmV3IFNpemUoMTAsIDEwKSk7CiAgUmVjdGFuZ2xlIC0+IGxvZyhyZWN0IC0+IGFyZWEoKSk7CiAgZGVidWcoIkFyZWEgb2YgUmVjdCBpczogIiArIHJlY3QgLT4gYXJlYSgpKTsKICByZXR1cm4gMDsKfQo="}}